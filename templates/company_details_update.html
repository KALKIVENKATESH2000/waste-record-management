<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'css/custom.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'fonts/objectivity/objectivity-font.css' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css"
    />
    <link
      rel="stylesheet"
      href="{% static 'zebra-datepicker/Zebra_Datepicker-master/dist/css/bootstrap/zebra_datepicker.min.css' %}"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'tags-inputs/tagsinput.js' %}" />

    <script src="{% static 'tags-inputs/tagsinput.js' %}"></script>
    
    <title>Kaysim Waste Record System</title>
    <link rel="icon" href="{% static 'images/logo/favicon.svg' %}" />
  </head>
  <style>
		.tags-container {
      border: 1px solid #ccc;
      padding: 5px;
      display: inline-block;
    }

    .branches {
      display: inline-block;
      background-color: #f1f1f1;
      color: #333;
      padding: 5px;
      margin: 5px;
      border-radius: 3px;
    }
	</style>
  <body>
    <section class="app-banner">
      {% include "base.html" %}
      
      <main class="content-wrapper">
        <div class="container-fluid">
            <div class="user-management">
                <div class="container">
                  {% if messages %}
                    <div class="messages">
                    {% for message in messages %}
                      <div class="alert {% if message.tags %}alert-{{ message.tags }}"{% endif %}>
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                        {{ message }}
                      </div>
                    {% endfor %}
                    </div>
                  {% endif %}
                 <div class="user-nav-bar">
                     <nav class="navbar navbar-expand-lg">
                         <a class="navbar-brand" href="#">Company Details</a>
                         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                           <span class="navbar-toggler-icon"></span>
                         </button>
                       
                         <div class="collapse navbar-collapse" id="navbarSupportedContent">
                           <form class="form-inline app-new-form my-2 my-lg-0">
                             <input class="form-control mr-sm-2" type="search" placeholder="Search Waste" aria-label="Search">
                             <div class="search-image">
                                 <img src="{% static 'images/user-management/search.svg '%}" alt="">
                             </div>
                           </form>
                           <div class="user-management-icons">
                             <ul>
                                 <li>
                                    <a href="">
                                     <img src="{% static 'images/user-management/bell-icon.svg' %}" alt="">
                                    </a>
                                 </li>
                                 <li class="person-drop-down">
                                  <a href="" type="button" data-toggle="dropdown">
                                    <img
                                      src="{% static 'images/user-management/profilee.png' %}" style="width: 50px;"
                                      alt=""
                                    />
                                  </a>
                                  <div class="dropdown">
                                    <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"></button>
                                    <div class="dropdown-menu">
                                      <a class="dropdown-item" href="#">{{request.user.username}}</a>
                                      <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                                    </div>
                                  </div>
                                </li>
                             </ul>
                           </div>
                         </div>
                       </nav>
                    </div>
                        <div class="company-details">
                          <form method="post" enctype="multipart/form-data">
                            {% csrf_token %} 
                            <div class="app-comapany-form">
                               <div class="row">
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                        <div class="form-group">
                                          <label for="name">Company Name</label>
                                          <input type="text" class="form-control" id="name" name="name" value="{{company_Obj.name}}" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                        
                                          <div class="form-group">
                                            <label for="contact_number">Company Contact Person</label>
                                            <input type="text" class="form-control" id="contact_number" name="contact_number" value="{{company_Obj.contact_number}}" readonly>
                                          </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group">
                                              <label for="address">Company Address</label>
                                              <input class="form-control" id="address" name="address"  value="{{company_Obj.address}}" readonly>
                                            </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group">
                                              <label for="email">Email</label>
                                              <input type="email" class="form-control" id="email" name="email" value="{{company_Obj.email}}" readonly>
                                            </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group">
                                              <label for="person_number">Contact Number </label>
                                              <input type="number" class="form-control" id="person_number" name="person_number" value="{{company_Obj.person_number}}" readonly>
                                            </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group">
                                              <label for="register_no">Company Reg No.</label>
                                              <input type="text" class="form-control" id="register_no" name="register_no" value="{{company_Obj.register_no}}" readonly>
                                            </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group">
                                              <label for="branches">Branches</label>
                                              <input class="form-control" id="input-skill" name="branches" data-role="tagsinput" value="{{company_Obj.branches}}">
                                            </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group">
                                              <label for="vat_no">Company VAT No.</label>
                                              <input type="text" class="form-control" id="vat_no" name="vat_no" value="{{company_Obj.vat_no}}" readonly>
                                            </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="app-new-main-form">
                                            <div class="form-group app-new-upload-file-2">
                                              <label for="logo">Company Logo</label>
                                              <img src="/media/{{company_Obj.company_logo}}" style="height: 40px;">
                                            </div>
                                    </div>
                                </div>
                               </div>
                            <div class="app-comapany-submit-button">
                                <button type="reset" class="btn-1">Reset</button>
                                <button type="submit" class="btn-2">Save</button>
                            </div>
                        <div class="button-content">
                        {% comment %} <p>Lorem Epson is a dummy word to fill the sentences Lorem Epson is a dummy word to fill the sentences</p> {% endcomment %}
                      </form>  
                    </div>
                        </div>
                    </div>
               </div>
            </div>        
        </div>
      </main>
  </section>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="{% static 'zebra-datepicker/Zebra_Datepicker-master/dist/zebra_datepicker.min.js' %}"></script>
    <script>
        $('#datepicker').Zebra_DatePicker();
    </script>
    <script>
      var strings = [];
  
      function AddStringsToArray() {
        var input = document.getElementById("branches_id").value;
        strings.push(input);
        displayStrings();
        document.getElementById("branches_id").value = ""; // Clear the input field
      }
  
      function displayStrings() {
        var input = document.getElementById("branches_id");
        var list = document.getElementById("stringList");
        list.innerHTML = ""; // Clear the previous list
  
        for (var i = 0; i < strings.length; i++) {
          var listItem = document.createElement("li");
          listItem.textContent = strings[i];
          list.appendChild(listItem);
          console.log(list)
        }
      }
      console.log(strings)
      var data1 = { strings: strings };
      var csrftoken = Cookies.get('csrftoken');
      fetch('/company_details/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          {"HTTP_X_CSRF_TOKEN":csrftoken}
        },
        data :{csrfmiddlewaretoken: window.CSRF_TOKEN},
        body: JSON.stringify(data1)
      })
      .then(response => {
        // Handle the response from the backend
        if (response.ok) {
          // Request was successful
          console.log('Strings array sent to the backend successfully');
        } else {
          // Request failed
          console.log('Failed to send strings array to the backend');
        }
      })
      .catch(error => {
        // Handle any error that occurred during the request
        console.log('An error occurred while sending the request:', error);
      });
    </script>
<!-- (Optional) Latest compiled and minified JavaScript translation files -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-*.min.js"></script>
</body>
</html>